{"version":3,"sources":["src/server/errors/PermissionDeniedError.ts"],"names":[],"mappings":";;;AASA,MAAa,qBAAsB,SAAQ,KAAK;IAC5C,YAAY,EAAE,KAAK,EAAE,kBAAkB,EAAG,UAAU,EAAE,MAAM,EAAgC;QACxF,MAAM,WAAW,GAAG,kBAAkB;aACjC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,IAAK,IAAI,CAAC,SAAS,CAAC,UAAU,CAAE,GAAG,CAAC;aACxD,IAAI,CAAC,IAAI,CAAC,CAAC;QAEhB,KAAK,CAAC,6BAA8B,UAAU,CAAE,CAAC,CAAC,IAAK,UAAW,GAAG,CAAC,CAAC,CAAC,EAAG,gBAAiB,KAAM,sCAAsC;cACtI,IAAK,WAAY,sDAAsD;cACvE,WAAY,MAAO,EAAE,CAAC,CAAC;IAC7B,CAAC;CACJ;AAVD,sDAUC","file":"PermissionDeniedError.js","sourcesContent":["import { IPermission } from '../../definition/permissions/IPermission';\n\ninterface IPermissionDeniedErrorParams {\n    appId: string;\n    missingPermissions: Array<IPermission>;\n    methodName?: string;\n    reason?: string;\n}\n\nexport class PermissionDeniedError extends Error {\n    constructor({ appId, missingPermissions,  methodName, reason }: IPermissionDeniedErrorParams) {\n        const permissions = missingPermissions\n            .map((permission) => `\"${ JSON.stringify(permission) }\"`)\n            .join(', ');\n\n        super(`Failed to call the method ${ methodName  ? `\"${ methodName }\"` : '' } as the app (${ appId }) lacks the following permissions:\\n`\n        + `[${ permissions }]. Declare them in your app.json to fix the issue.\\n`\n        + `reason: ${ reason }`);\n    }\n}\n"]}