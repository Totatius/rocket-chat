function module(t,e,n){var i,r,u,s,a,o,c,l,h,f;n.link("@babel/runtime/helpers/createForOfIteratorHelperLoose",{default:function(t){i=t}},0),n.link("@babel/runtime/regenerator",{default:function(t){r=t}},1),n.link("@babel/runtime/helpers/createClass",{default:function(t){u=t}},2),n.link("@babel/runtime/helpers/assertThisInitialized",{default:function(t){s=t}},3),n.link("@babel/runtime/helpers/createSuper",{default:function(t){a=t}},4),n.link("@babel/runtime/helpers/inheritsLoose",{default:function(t){o=t}},5),n.link("@babel/runtime/helpers/classPrivateFieldLooseBase",{default:function(t){c=t}},6),n.link("@babel/runtime/helpers/classPrivateFieldLooseKey",{default:function(t){l=t}},7),n.export({RecordList:function(){return d}}),n.link("@rocket.chat/emitter",{Emitter:function(t){h=t}},0),n.link("../asyncState",{AsyncStatePhase:function(t){f=t}},1);var d=function(t){o(n,t);var e=a(n);function n(){var e;return e=t.apply(this,arguments)||this,Object.defineProperty(s(e),v,{writable:!0,value:void 0}),Object.defineProperty(s(e),p,{writable:!0,value:void 0}),Object.defineProperty(s(e),m,{writable:!0,value:void 0}),Object.defineProperty(s(e),b,{writable:!0,value:void 0}),Object.defineProperty(s(e),y,{writable:!0,value:void 0}),Object.defineProperty(s(e),k,{writable:!0,value:void 0}),c(s(e),v)[v]=!1,c(s(e),p)[p]=new Map,c(s(e),m)[m]=f.LOADING,c(s(e),b)[b]=void 0,c(s(e),y)[y]=void 0,c(s(e),k)[k]=Promise.resolve(),e}var l=n.prototype;return l.filter=function(){function t(t){return!0}return t}(),l.compare=function(){function t(t,e){return t._updatedAt.getTime()-e._updatedAt.getTime()}return t}(),l.insert=function(){function t(t){c(this,p)[p].set(t._id,t),this.emit(t._id+"/inserted",t),"number"==typeof c(this,y)[y]&&c(this,y)[y]++,c(this,v)[v]=!0}return t}(),l.update=function(){function t(t){c(this,p)[p].set(t._id,t),this.emit(t._id+"/updated",t),c(this,v)[v]=!0}return t}(),l.delete=function(){function t(t){c(this,p)[p].delete(t),this.emit(t+"/deleted"),"number"==typeof c(this,y)[y]&&c(this,y)[y]--,c(this,v)[v]=!0}return t}(),l.push=function(){function t(t){var e=c(this,p)[p].has(t._id),n=this.filter(t);!e||n?e&&n?this.update(t):!e&&n&&this.insert(t):this.delete(t._id)}return t}(),l.mutate=function(){function t(t){var e;return r.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(this,m)[m]===f.RESOLVED&&(c(this,m)[m]=f.UPDATING,this.emit("mutating")),c(this,k)[k]=c(this,k)[k].then(t),n.next=5,r.awrap(c(this,k)[k]);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),this.emit("errored",n.t0);case 10:return n.prev=10,e=c(this,v)[v],c(this,m)[m]=f.RESOLVED,e&&(c(this,b)[b]=void 0,c(this,v)[v]=!1),this.emit("mutated",e),n.finish(10);case 16:case"end":return n.stop()}}return n}(),null,this,[[0,7,10,16]],Promise)}return t}(),l.batchHandle=function(){function t(t){var e=this;return this.mutate(function(){function n(){var n,u,s,a;return r.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.awrap(t());case 2:if((n=o.sent).items)for(u=i(n.items);!(s=u()).done;)a=s.value,e.push(a);n.itemCount&&(c(e,y)[y]=n.itemCount,c(e,v)[v]=!0);case 5:case"end":return o.stop()}}return o}(),null,null,null,Promise)}return n}())}return t}(),l.prune=function(){function t(t){var e=this;return this.mutate((function(){for(var n=i(c(e,p)[p].values()),r;!(r=n()).done;){var u=r.value;t(u)&&e.delete(u._id)}}))}return t}(),l.handle=function(){function t(t){var e=this;return this.mutate((function(){e.push(t)}))}return t}(),l.remove=function(){function t(t){var e=this;return this.mutate((function(){c(e,p)[p].has(t)&&e.delete(t)}))}return t}(),l.clear=function(){function t(){var t=this;return this.mutate((function(){0!==c(t,p)[p].size&&(c(t,p)[p].clear(),c(t,b)[b]=void 0,c(t,y)[y]=void 0,c(t,v)[v]=!0,t.emit("cleared"))}))}return t}(),u(n,[{key:"phase",get:function(){return c(this,m)[m]}},{key:"items",get:function(){return c(this,b)[b]||(c(this,b)[b]=Array.from(c(this,p)[p].values()).sort(this.compare)),c(this,b)[b]}},{key:"itemCount",get:function(){var t;return null!==(t=c(this,y)[y])&&void 0!==t?t:c(this,p)[p].size}}]),n}(h),v=l("hasChanges"),p=l("index"),m=l("phase"),b=l("items"),y=l("itemCount"),k=l("pedingMutation")}

