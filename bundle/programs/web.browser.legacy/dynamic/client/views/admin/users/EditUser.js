function module(e,n,t){var r,a,u,s,i,o,l,c,d,f,m,p,v,k,h,b,x,E,_,w,A,g,y;function U(e){var n=e.uid,t=s(e,["uid"]),r=k(),a=g("roles.list",""),l=a.value,c=a.phase,d=a.error,f=g("users.info",o((function(){return{userId:n}}),[n])),m=f.value,p=f.phase,h=f.error;return[p,c].includes(y.LOADING)?i.createElement(A,null):h||d?i.createElement(v,{m:"x16",type:"danger"},r("User_not_found")):i.createElement(T,u({data:m.user,roles:l.roles},t))}t.link("@babel/runtime/regenerator",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},1),t.link("@babel/runtime/helpers/extends",{default:function(e){u=e}},2),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){s=e}},3),t.export({EditUserWithData:function(){return U},EditUser:function(){return T}}),t.link("react",{default:function(e){i=e},useMemo:function(e){o=e},useState:function(e){l=e},useCallback:function(e){c=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){d=e},Field:function(e){f=e},Margins:function(e){m=e},Button:function(e){p=e},Callout:function(e){v=e}},1),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){k=e}},2),t.link("../../../hooks/useEndpointAction",{useEndpointAction:function(e){h=e}},3),t.link("../../../hooks/useEndpointUpload",{useEndpointUpload:function(e){b=e}},4),t.link("../../../contexts/RouterContext",{useRoute:function(e){x=e}},5),t.link("../../../components/avatar/UserAvatarEditor",{default:function(e){E=e}},6),t.link("../../../hooks/useForm",{useForm:function(e){_=e}},7),t.link("./UserForm",{default:function(e){w=e}},8),t.link("../../../components/Skeleton",{FormSkeleton:function(e){A=e}},9),t.link("../../../hooks/useEndpointData",{useEndpointData:function(e){g=e}},10),t.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){y=e}},11);var P=function(e){var n,t,r,a,u;return{roles:e.roles,name:null!==(n=e.name)&&void 0!==n?n:"",password:"",username:e.username,status:e.status,bio:null!==(t=e.bio)&&void 0!==t?t:"",nickname:null!==(r=e.nickname)&&void 0!==r?r:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(a=e.customFields)&&void 0!==a?a:{},statusText:null!==(u=e.statusText)&&void 0!==u?u:""}};function T(e){var n=e.data,t=e.roles,v=s(e,["data","roles"]),A=k(),g=l(),y=a(g,2),U=y[0],T=y[1],C=_(P(n)),S=C.values,F=C.handlers,R=C.reset,I=C.hasUnsavedChanges,D=x("admin-users"),O=c((function(e){return D.push({context:"info",id:e})}),[D]),j=o((function(){return{userId:n._id,data:S}}),[n._id,S]),G=o((function(){return{userId:n._id,avatarUrl:U&&U.avatarUrl}}),[n._id,U]),B=o((function(){return{userId:n._id}}),[n._id]),M=h("POST","users.update",j,A("User_updated_successfully")),W=b("users.setAvatar",G,A("Avatar_changed_successfully")),q=h("POST","users.setAvatar",G,A("Avatar_changed_successfully")),H=h("POST","users.resetAvatar",B,A("Avatar_changed_successfully")),L=c(function(){function e(){return r.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==U){e.next=2;break}return e.abrupt("return",H());case 2:if(!U.avatarUrl){e.next=4;break}return e.abrupt("return",q());case 4:return U.set("userId",n._id),e.abrupt("return",W(U));case 6:case"end":return e.stop()}}return e}(),null,null,null,Promise)}return e}(),[U,H,W,q,n._id]),N=c(function(){function e(){var e;return r.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(M());case 2:if(!(e=t.sent).success){t.next=8;break}if(!U){t.next=7;break}return t.next=7,r.awrap(L());case 7:O(n._id);case 8:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return e}(),[U,n._id,O,M,L]),V=t.map((function(e){var n=e._id,t;return[n,e.description||n]})),z=I||U,J=o((function(){return i.createElement(E,{currentUsername:n.username,username:S.username,etag:n.avatarETag,setAvatarObj:T})}),[n.username,n.avatarETag,S.username]),K=o((function(){return i.createElement(f,null,i.createElement(f.Row,null,i.createElement(d,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(m,{inlineEnd:"x4"},i.createElement(p,{flexGrow:1,type:"reset",disabled:!z,onClick:R},A("Reset")),i.createElement(p,{mie:"none",flexGrow:1,disabled:!z||0===S.email.length,onClick:N},A("Save"))))))}),[N,z,R,A,S]);return i.createElement(w,u({formValues:S,formHandlers:F,availableRoles:V,prepend:J,append:K},v))}}

