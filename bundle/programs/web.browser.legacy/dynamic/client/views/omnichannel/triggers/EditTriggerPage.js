function module(e,n,t){var a,r,o,l,i,s,u,c,m,f,d,p,g,k,v,h,b,x,E,C;t.link("@babel/runtime/regenerator",{default:function(e){a=e}},0),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},2),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){l=e}},3),t.link("react",{default:function(e){i=e}},0),t.link("@rocket.chat/fuselage",{Margins:function(e){s=e},Callout:function(e){u=e},FieldGroup:function(e){c=e},Box:function(e){m=e},Button:function(e){f=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){d=e}},2),t.link("./TriggersForm",{default:function(e){p=e}},3),t.link("../../../components/PageSkeleton",{default:function(e){g=e}},4),t.link("../../../contexts/TranslationContext",{useTranslation:function(e){k=e}},5),t.link("../../../contexts/ServerContext",{useMethod:function(e){v=e}},6),t.link("../../../hooks/useForm",{useForm:function(e){h=e}},7),t.link("../../../contexts/RouterContext",{useRoute:function(e){b=e}},8),t.link("../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){x=e}},9),t.link("../../../hooks/useEndpointData",{useEndpointData:function(e){E=e}},10),t.link("../../../hooks/useAsyncState",{AsyncStatePhase:function(e){C=e}},11);var S=function(e){var n=e.id,t=e.onSave,a=k(),r=E("livechat/triggers/"+n),o=r.value,l=r.phase;return l===C.LOADING?i.createElement(g,null):l!==C.REJECTED&&(null==o?void 0:o.trigger)?i.createElement(T,{data:o.trigger,onSave:t}):i.createElement(u,null,a("Error"),": error")},y=function(e){var n=e.name,t=e.description,a=e.enabled,r=e.runOnce,o,i=l(e.conditions,1)[0],s=i.name,u=i.value,c,m=l(e.actions,1)[0],f=m.action,d=m.params,p=d.sender,g=d.msg,k=d.name;return{name:null!=n?n:"",description:null!=t?t:"",enabled:!!a,runOnce:!!r,conditions:{name:null!=s?s:"page-url",value:null!=u?u:""},actions:{name:null!=f?f:"",params:{sender:null!=p?p:"queue",msg:null!=g?g:"",name:null!=k?k:""}}}},T=function(e){var n=e.data,t=e.onSave,l=x(),u=k(),g=b("omnichannel-triggers"),E=v("livechat:saveTrigger"),C=h(y(n)),S=C.values,T=C.handlers,D=C.hasUnsavedChanges,w=d(function(){function e(){var e,i,s,c,m;return a.async(function(){function f(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,e=S.actions.params,i=e.sender,s=e.msg,c=e.name,m=o(S,["actions"]),f.next=4,a.awrap(E(r({_id:n._id},m,{conditions:[S.conditions],actions:[{name:"send-message",params:r({sender:i,msg:s},"custom"===i&&{name:c})}]})));case 4:l({type:"success",message:u("Saved")}),t(),g.push({}),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(0),l({type:"error",message:f.t0});case 12:case"end":return f.stop()}}return f}(),null,null,[[0,9]],Promise)}return e}()),F,M=S.name&&D;return i.createElement(i.Fragment,null,i.createElement(c,null,i.createElement(p,{values:S,handlers:T})),i.createElement(m,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(s,{inlineEnd:"x4"},i.createElement(f,{flexGrow:1,primary:!0,onClick:w,disabled:!M},u("Save")))))};t.exportDefault(S)}

