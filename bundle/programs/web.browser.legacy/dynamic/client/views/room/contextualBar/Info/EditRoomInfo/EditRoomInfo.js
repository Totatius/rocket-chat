function module(e,n,t){var l,o,a,r,i,c,u,s,d,m,f,E,h,p,y,x,R,w,b,C,v,g,_,k,A,P,M,O,S,G,T,D,j,N,L,F,I,B,H,q,J;t.link("@babel/runtime/regenerator",{default:function(e){l=e}},0),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){a=e}},2),t.link("@babel/runtime/helpers/objectSpread2",{default:function(e){r=e}},3),t.link("react",{default:function(e){i=e},useCallback:function(e){c=e},useMemo:function(e){u=e},useRef:function(e){s=e}},0),t.link("@rocket.chat/fuselage",{Field:function(e){d=e},TextInput:function(e){m=e},ToggleSwitch:function(e){f=e},MultiSelect:function(e){E=e},Accordion:function(e){h=e},Callout:function(e){p=e},NumberInput:function(e){y=e},FieldGroup:function(e){x=e},Button:function(e){R=e},ButtonGroup:function(e){w=e},Box:function(e){b=e},Icon:function(e){C=e},TextAreaInput:function(e){v=e}},1),t.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){g=e}},2),t.link("../../../../../components/VerticalBar",{default:function(e){_=e}},3),t.link("../../../../../components/RawText",{default:function(e){k=e}},4),t.link("../../../../../components/avatar/RoomAvatarEditor",{default:function(e){A=e}},5),t.link("../../../../../components/DeleteChannelWarning",{default:function(e){P=e}},6),t.link("../../../../../contexts/TranslationContext",{useTranslation:function(e){M=e}},7),t.link("../../../../../hooks/useForm",{useForm:function(e){O=e}},8),t.link("../../../../../../app/utils/client",{roomTypes:function(e){S=e},RoomSettingsEnum:function(e){G=e}},9),t.link("../../../../../../app/lib/lib/MessageTypes",{MessageTypesValues:function(e){T=e}},10),t.link("../../../../../contexts/ServerContext",{useMethod:function(e){D=e}},11),t.link("../../../../../contexts/ModalContext",{useSetModal:function(e){j=e}},12),t.link("../../../../../contexts/SettingsContext",{useSetting:function(e){N=e}},13),t.link("../../../../../contexts/AuthorizationContext",{usePermission:function(e){L=e},useAtLeastOnePermission:function(e){F=e},useRole:function(e){I=e}},14),t.link("../../../../../hooks/useEndpointAction",{useEndpointActionExperimental:function(e){B=e}},15),t.link("../../../hooks/useUserRoom",{useUserRoom:function(e){H=e}},16),t.link("../../../providers/ToolboxProvider",{useTabBarClose:function(e){q=e}},17),t.link("../../../../../../app/e2e/client/rocketchat.e2e",{e2e:function(e){J=e}},18);var W={c:"Channels",p:"Groups",d:"DMs"},U=function(e,n){var t=e.t,l=e.ro,o=e.archived,a=e.topic,i=e.description,c=e.announcement,s=e.joinCodeRequired,d=e.sysMes,m=e.encrypted,f=e.retention,E=void 0===f?{}:f,h=n.retentionPolicyEnabled,p=n.maxAgeDefault,y=N("RetentionPolicy_AppliesTo"+W[e.t]),x=N("RetentionPolicy_DoNotPrunePinned"),R=N("RetentionPolicy_FilesOnly");return u((function(){var n,u,f;return r({roomName:"d"===t?e.usernames.join(" x "):S.getRoomName(t,r({type:t},e)),roomType:t,readOnly:!!l,reactWhenReadOnly:!1,archived:!!o,roomTopic:null!=a?a:"",roomDescription:null!=i?i:"",roomAnnouncement:null!=c?c:"",roomAvatar:void 0,joinCode:"",joinCodeRequired:!!s,systemMessages:Array.isArray(d)?d:[],hideSysMes:!!(null==d?void 0:d.length),encrypted:m},h&&{retentionEnabled:null!==(n=E.enabled)&&void 0!==n?n:y,retentionOverrideGlobal:!!E.overrideGlobal,retentionMaxAge:Math.min(E.maxAge,p)||p,retentionExcludePinned:null!==(u=E.excludePinned)&&void 0!==u?u:x,retentionFilesOnly:null!==(f=E.filesOnly)&&void 0!==f?f:R})}),[c,o,i,x,R,s,p,E.enabled,E.excludePinned,E.filesOnly,E.maxAge,E.overrideGlobal,y,h,l,e,d,t,a,m])};function V(e){var n=e.rid,t=e.onClickBack,l=H(n),o=q();return i.createElement(Y,{onClickClose:o,onClickBack:t,room:r({type:null==l?void 0:l.t},l)})}var z=function(e,n,t,l){return(!e.default||l)&&("p"===e.t&&n||"c"===e.t&&t)};function Y(e){var n=e.room,t=e.onClickClose,H=e.onClickBack,q=M(),V=j(),Y=N("RetentionPolicy_Enabled"),K=N("RetentionPolicy_MaxAge_"+W[n.t])||30,Q=s({}),X=c((function(e){var n=e.initialValue,t=e.value,l=e.key,o=Q.current;JSON.stringify(n)!==JSON.stringify(t)?o[l]=t:delete o[l]}),[]),Z=O(U(n,{retentionPolicyEnabled:Y,maxAgeDefault:K}),X),$=Z.values,ee=Z.handlers,ne=Z.hasUnsavedChanges,te=Z.reset,le=Z.commit,oe=u((function(){return T.map((function(e){var n=e.key,t=e.i18nLabel;return[n,q(t)]}))}),[q]),ae=$.roomName,re=$.roomType,ie=$.readOnly,ce=$.encrypted,ue=$.roomAvatar,se=$.archived,de=$.roomTopic,me=$.roomDescription,fe=$.roomAnnouncement,Ee=$.reactWhenReadOnly,he=$.joinCode,pe=$.joinCodeRequired,ye=$.systemMessages,xe=$.hideSysMes,Re=$.retentionEnabled,we=$.retentionOverrideGlobal,be=$.retentionMaxAge,Ce=$.retentionExcludePinned,ve=$.retentionFilesOnly,ge=ee.handleJoinCode,_e=ee.handleJoinCodeRequired,ke=ee.handleSystemMessages,Ae=ee.handleEncrypted,Pe=ee.handleHideSysMes,Me=ee.handleRoomName,Oe=ee.handleReadOnly,Se=ee.handleArchived,Ge=ee.handleRoomAvatar,Te=ee.handleReactWhenReadOnly,De=ee.handleRoomType,je=ee.handleRoomTopic,Ne=ee.handleRoomDescription,Le=ee.handleRoomAnnouncement,Fe=ee.handleRetentionEnabled,Ie=ee.handleRetentionOverrideGlobal,Be=ee.handleRetentionMaxAge,He=ee.handleRetentionExcludePinned,qe=ee.handleRetentionFilesOnly,Je=u((function(){var e,t=(null===(e=S.getConfig(n.t))||void 0===e?void 0:e.allowRoomSettingChange)||function(){};return[t(n,G.NAME),t(n,G.TOPIC),t(n,G.ANNOUNCEMENT),t(n,G.ARCHIVE_OR_UNARCHIVE),t(n,G.DESCRIPTION),t(n,G.TYPE),t(n,G.READ_ONLY),t(n,G.SYSTEM_MESSAGES),t(n,G.JOIN_CODE),t(n,G.REACT_WHEN_READ_ONLY),t(n,G.E2E)]}),[n]),We=a(Je,11),Ue=We[0],Ve=We[1],ze=We[2],Ye=We[3],Ke=We[4],Qe=We[5],Xe=We[6],Ze=We[7],$e=We[8],en=We[9],nn=We[10],tn=I("admin"),ln=L("create-c"),on=L("create-p"),an=z(n,ln,on,tn),rn=L("set-readonly",n._id),cn=L("set-react-when-readonly",n._id),un=L("edit-privileged-setting",n._id),sn=F(u((function(){return["archive-room","unarchive-room"]}),[])),dn=L("delete-"+n.t),mn=L("toggle-room-e2e-encryption",n._id)&&(n.encrypted||J.isReady()),fn=se!==!!n.archived,En=n.archived?"unarchive":"archive",hn=n.archived?"Room_has_been_unarchived":"Room_has_been_archived",pn=B("POST","rooms.saveRoomSettings",q("Room_updated_successfully")),yn=B("POST","rooms.changeArchivationState",q(hn)),xn=g(function(){function e(){var e,t,a,i,c,u;return l.async(function(){function s(s){for(;;)switch(s.prev=s.next){case 0:return e=Q.current,t=e.joinCodeRequired,a=e.hideSysMes,delete(i=o(e,["joinCodeRequired","hideSysMes"])).archived,c=function(){return pn(r({rid:n._id},i,{},he&&{joinCode:t?he:""},{},(i.systemMessages||!a)&&{systemMessages:a?ye:[]}))},u=function(){return yn({rid:n._id,action:En})},s.next=6,l.awrap(Promise.all([ne&&c(),fn&&u()].filter(Boolean)));case 6:Q.current={},le();case 8:case"end":return s.stop()}}return s}(),null,null,null,Promise)}return e}()),Rn=D("eraseRoom"),wn=g((function(){var e=function(){return V(void 0)},t=function(){function t(){return l.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.awrap(Rn(n._id));case 2:e();case 3:case"end":return t.stop()}}return t}(),null,null,null,Promise)}return t}();V(i.createElement(P,{onConfirm:t,onCancel:e}))})),bn=g((function(){De("p"===re?"c":"p")})),Cn=g((function(e){Be(Math.max(1,Number(e.currentTarget.value)))}));return i.createElement(i.Fragment,null,i.createElement(_.Header,null,H&&i.createElement(_.Back,{onClick:H}),i.createElement(_.Text,null,q("edit-room")),t&&i.createElement(_.Close,{onClick:t})),i.createElement(_.ScrollableContent,{p:"x24",is:"form",onSubmit:g((function(e){return e.preventDefault()}))},i.createElement(b,{display:"flex",justifyContent:"center"},i.createElement(A,{room:n,roomAvatar:ue,onChangeAvatar:Ge})),i.createElement(d,null,i.createElement(d.Label,null,q("Name")),i.createElement(d.Row,null,i.createElement(m,{disabled:!Ue,value:ae,onChange:Me,flexGrow:1}))),Ke&&i.createElement(d,null,i.createElement(d.Label,null,q("Description")),i.createElement(d.Row,null,i.createElement(v,{rows:4,value:me,onChange:Ne,flexGrow:1}))),ze&&i.createElement(d,null,i.createElement(d.Label,null,q("Announcement")),i.createElement(d.Row,null,i.createElement(v,{rows:4,value:fe,onChange:Le,flexGrow:1}))),Ve&&i.createElement(d,null,i.createElement(d.Label,null,q("Topic")),i.createElement(d.Row,null,i.createElement(v,{rows:4,value:de,onChange:je,flexGrow:1}))),Qe&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Private")),i.createElement(d.Row,null,i.createElement(f,{disabled:!an,checked:"p"===re,onChange:bn}))),i.createElement(d.Hint,null,q("Just_invited_people_can_access_this_channel"))),Xe&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Read_only")),i.createElement(d.Row,null,i.createElement(f,{disabled:!rn,checked:ie,onChange:Oe}))),i.createElement(d.Hint,null,q("Only_authorized_users_can_write_new_messages"))),en&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("React_when_read_only")),i.createElement(d.Row,null,i.createElement(f,{disabled:!cn,checked:Ee,onChange:Te}))),i.createElement(d.Hint,null,q("Only_authorized_users_can_write_new_messages"))),Ye&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Archived")),i.createElement(d.Row,null,i.createElement(f,{disabled:!sn,checked:se,onChange:Se})))),$e&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Password_to_access")),i.createElement(d.Row,null,i.createElement(f,{checked:pe,onChange:_e}))),i.createElement(d.Row,null,i.createElement(m,{disabled:!pe,value:he,onChange:ge,placeholder:q("Reset_password"),flexGrow:1}))),Ze&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Hide_System_Messages")),i.createElement(d.Row,null,i.createElement(f,{checked:xe,onChange:Pe}))),i.createElement(d.Row,null,i.createElement(E,{options:oe,disabled:!xe,value:ye,onChange:ke,placeholder:q("Select_an_option"),flexGrow:1}))),nn&&i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("Encrypted")),i.createElement(d.Row,null,i.createElement(f,{disabled:!mn,checked:ce,onChange:Ae})))),Y&&i.createElement(h,null,i.createElement(h.Item,{title:q("Prune")},i.createElement(x,null,i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("RetentionPolicyRoom_Enabled")),i.createElement(d.Row,null,i.createElement(f,{checked:Re,onChange:Fe})))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("RetentionPolicyRoom_OverrideGlobal")),i.createElement(d.Row,null,i.createElement(f,{disabled:!Re||!un,checked:we,onChange:Ie})))),we&&i.createElement(i.Fragment,null,i.createElement(p,{type:"danger"},i.createElement(k,null,q("RetentionPolicyRoom_ReadTheDocs"))),i.createElement(d,null,i.createElement(d.Label,null,q("RetentionPolicyRoom_MaxAge",{max:K})),i.createElement(d.Row,null,i.createElement(y,{value:be,onChange:Cn,flexGrow:1}))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("RetentionPolicyRoom_ExcludePinned")),i.createElement(d.Row,null,i.createElement(f,{checked:Ce,onChange:He})))),i.createElement(d,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:1},i.createElement(d.Label,null,q("RetentionPolicyRoom_FilesOnly")),i.createElement(d.Row,null,i.createElement(f,{checked:ve,onChange:qe})))))))),i.createElement(d,null,i.createElement(d.Row,null,i.createElement(b,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},i.createElement(w,{stretch:!0,flexGrow:1},i.createElement(R,{type:"reset",disabled:!ne,onClick:te},q("Reset")),i.createElement(R,{flexGrow:1,disabled:!ne,onClick:xn},q("Save")))))),i.createElement(d,null,i.createElement(d.Row,null,i.createElement(R,{flexGrow:1,primary:!0,danger:!0,disabled:!dn,onClick:wn},i.createElement(C,{name:"trash",size:"x16"}),q("Delete"))))))}t.exportDefault(V)}

