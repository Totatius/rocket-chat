function module(e,t,n){var o,l,i,r,a,u,s,c,f,d,m,p,x,k,h,y,C,g,v,D,I,E,b,S,w,A,T,M,F,z,L,G,N,O,R,U,_;n.link("@babel/runtime/helpers/toConsumableArray",{default:function(e){o=e}},0),n.link("@babel/runtime/regenerator",{default:function(e){l=e}},1),n.link("@babel/runtime/helpers/objectSpread2",{default:function(e){i=e}},2),n.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},3),n.export({createItemData:function(){return B},RoomFiles:function(){return J}}),n.link("react",{default:function(e){a=e},useState:function(e){u=e},useCallback:function(e){s=e},useMemo:function(e){c=e}},0),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback:function(e){f=e},useLocalStorage:function(e){d=e},useDebouncedState:function(e){m=e},useUniqueId:function(e){p=e},useResizeObserver:function(e){x=e}},1),n.link("@rocket.chat/fuselage",{Box:function(e){k=e},Icon:function(e){h=e},TextInput:function(e){y=e},Select:function(e){C=e},Throbber:function(e){g=e},Margins:function(e){v=e}},2),n.link("react-window",{FixedSizeList:function(e){D=e}},3),n.link("react-window-infinite-loader",{default:function(e){I=e}},4),n.link("memoize-one",{default:function(e){E=e}},5),n.link("../../../../contexts/UserContext",{useUserId:function(e){b=e},useUserRoom:function(e){S=e}},6),n.link("../../../../components/DeleteFileWarning",{default:function(e){w=e}},7),n.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch:function(e){A=e}},8),n.link("../../../../contexts/ModalContext",{useSetModal:function(e){T=e}},9),n.link("../../../../contexts/ServerContext",{useMethod:function(e){M=e}},10),n.link("../../../../hooks/useAsyncState",{AsyncStatePhase:function(e){F=e}},11),n.link("../../../../contexts/TranslationContext",{useTranslation:function(e){z=e}},12),n.link("../../../../components/VerticalBar",{default:function(e){L=e}},13),n.link("./components/FileItem",{default:function(e){G=e}},14),n.link("../../../../components/ScrollableContentWrapper",{default:function(e){N=e}},15),n.link("./hooks/useFileList",{useFileList:function(e){O=e}},16),n.link("../../../../hooks/useComponentDidUpdate",{useComponentDidUpdate:function(e){R=e}},17),n.link("./hooks/useMessageDeletionIsAllowed",{useMessageDeletionIsAllowed:function(e){U=e}},18),n.link("../../providers/ToolboxProvider",{useTabBarClose:function(e){_=e}},19);var q=a.memo((function(e){var t=e.data,n=e.index,o=e.style,l=t.items,i=t.userId,r=t.onClickDelete,u=t.isDeletionAllowed,s=l[n]||null;return s&&a.createElement(J.Item,{index:n,style:o,_id:s._id,name:s.name,url:s.url,uploadedAt:s.uploadedAt,user:s.user,ts:s.ts,type:s.type,typeGroup:s.typeGroup,fileData:t[n],userId:i,onClickDelete:r,isDeletionAllowed:u})})),B=E((function(e,t,n){return{items:e,onClickDelete:t,isDeletionAllowed:n}})),J=function(){function e(e){var t=e.loading,n=e.filesItems,o=void 0===n?[]:n,l=e.text,i=e.type,r=e.setText,u=e.setType,s=e.onClickClose,f=e.onClickDelete,d=e.total,m=e.loadMoreItems,E=e.isDeletionAllowed,b=z(),S=function(e){return!!o[e]},w=c((function(){return[["all",b("All")],["image",b("Images")],["video",b("Videos")],["audio",b("Audios")],["text",b("Texts")],["application",b("Files")]]}),[b]),A=x({debounceDelay:100}),T=A.ref,M=A.contentBoxSize,F=(M=void 0===M?{}:M).blockSize,G=void 0===F?780:F,O=p(),R=B(o,f,E);return a.createElement(a.Fragment,null,a.createElement(L.Header,null,a.createElement(L.Icon,{name:"attachment"}),a.createElement(L.Text,null,b("Files")),s&&a.createElement(L.Close,{onClick:s})),a.createElement(L.Content,{p:"x12"},a.createElement(k,{display:"flex",flexDirection:"row",p:"x12",flexShrink:0},a.createElement(k,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},a.createElement(v,{inline:"x4"},a.createElement(y,{"data-qa-files-search":!0,id:O,placeholder:b("Search_Files"),value:l,onChange:r,addon:a.createElement(h,{name:"magnifier",size:"x20"})}),a.createElement(C,{flexGrow:0,width:"110px",onChange:u,value:i,options:w})))),t&&a.createElement(k,{p:"x12"},a.createElement(g,{size:"x12"})),!t&&o.length<=0&&a.createElement(k,{p:"x12"},b("No_results_found")),a.createElement(k,{w:"full",h:"full",ref:T,flexShrink:1,overflow:"hidden"},a.createElement(I,{isItemLoaded:S,itemCount:d,loadMoreItems:m},(function(e){var t=e.onItemsRendered,n=e.ref;return(a.createElement(D,{outerElementType:N,className:"List",height:G,itemCount:d,itemSize:74,itemData:R,onItemsRendered:t,ref:n},q))})))))}return e}();J.Item=G,n.exportDefault((function(e){var t=e.rid,n=b(),c=_(),p=S(t);p.type=p.t,p.rid=t;var x=T(),k=f((function(){return x()})),h=A(),y=M("deleteFileMessage"),C=d("file-list-type","all"),g=r(C,2),v=g[0],D=g[1],I=u(""),E=r(I,2),z=E[0],L=E[1],G=m({roomId:t,sort:JSON.stringify({uploadedAt:-1}),count:50,query:JSON.stringify(i({},"all"!==v&&{typeGroup:v}))},500),N=r(G,2),q=N[0],B=N[1],P=s((function(e){L(e.currentTarget.value)}),[]);R((function(){return B((function(e){return i({},e,{roomId:t,query:JSON.stringify(i({name:{$regex:z||"",$options:"i"}},"all"!==v&&{typeGroup:v}))})}))}),[t,z,v,B]);var V=O(p.type,q),W=V.value,$=V.phase,j=V.reload,H=V.more,K=f((function(e){var t=function(){function t(){return l.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.awrap(y(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),h({type:"error",message:t.t0});case 8:k(),j();case 10:case"end":return t.stop()}}return t}(),null,null,[[0,5]],Promise)}return t}();x(a.createElement(w,{onConfirm:t,onCancel:k}))}),[]),Q=s((function(e,t){return H((function(n){return i({},n,{offset:e,count:t-e})}),(function(e,t){return{total:t.total,files:[].concat(o(e.files),o(t.files))}}))}),[H]),X=U(t,n);return a.createElement(J,{rid:t,loading:$===F.LOADING&&!0,type:v,text:z,loadMoreItems:Q,setType:D,setText:P,filesItems:$===F.RESOLVED&&(null==W?void 0:W.files),total:null==W?void 0:W.total,onClickClose:c,onClickDelete:K,isDeletionAllowed:X})}))}

