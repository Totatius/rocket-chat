function module(e,n,t){var r,o,i,a,u,l,s,c,d,f,m,p,h,k,g,x,v,b,C,E,T,y,w,I,S,M,R,U,L,B,D,G,_,z,A,N,P,F,j,H,W,O,V,Q;function q(e){return function(n){var t=n.msg,r=n.username,u=n.replies,l=void 0===u?[]:u,s=n.tcount,c=n.ts,d=i(n,["msg","username","replies","tcount","ts"]);return(a.createElement(e,o({replies:s,participants:null==l?void 0:l.length,username:r,msg:t,ts:c},d)))}}t.link("@babel/runtime/helpers/slicedToArray",{default:function(e){r=e}},0),t.link("@babel/runtime/helpers/extends",{default:function(e){o=e}},1),t.link("@babel/runtime/helpers/objectWithoutProperties",{default:function(e){i=e}},2),t.export({withData:function(){return Z},normalizeThreadMessage:function(){return ee},ThreadList:function(){return te}}),t.link("react",{default:function(e){a=e},useCallback:function(e){u=e},useMemo:function(e){l=e},useState:function(e){s=e},useRef:function(e){c=e},memo:function(e){d=e}},0),t.link("@rocket.chat/fuselage",{Box:function(e){f=e},Icon:function(e){m=e},TextInput:function(e){p=e},Select:function(e){h=e},Margins:function(e){k=e},Callout:function(e){g=e}},1),t.link("react-window",{FixedSizeList:function(e){x=e}},2),t.link("react-window-infinite-loader",{default:function(e){v=e}},3),t.link("@rocket.chat/fuselage-hooks",{useDebouncedValue:function(e){b=e},useResizeObserver:function(e){C=e},useLocalStorage:function(e){E=e},useMutableCallback:function(e){T=e}},4),t.link("../../../../components/VerticalBar",{default:function(e){y=e}},5),t.link("../../../../contexts/TranslationContext",{useTranslation:function(e){w=e}},6),t.link("../../../../contexts/RouterContext",{useRoute:function(e){I=e},useCurrentRoute:function(e){S=e},useQueryStringParameter:function(e){M=e}},7),t.link("../../../../../app/ui-utils/client",{call:function(e){R=e}},8),t.link("../../../../contexts/UserContext",{useUserId:function(e){U=e},useUserSubscription:function(e){L=e}},9),t.link("../../hooks/useUserRoom",{useUserRoom:function(e){B=e}},10),t.link("../../../../contexts/SettingsContext",{useSetting:function(e){D=e}},11),t.link("../../../../hooks/useTimeAgo",{useTimeAgo:function(e){G=e}},12),t.link("../../../../lib/clickableItem",{clickableItem:function(e){_=e}},13),t.link("../../components/Message",{MessageSkeleton:function(e){z=e}},14),t.link("./components/Message",{default:function(e){A=e}},15),t.link("../../../../../lib/escapeHTML",{escapeHTML:function(e){N=e}},16),t.link("../../../../hooks/useAsyncState",{AsyncStatePhase:function(e){P=e}},17),t.link("../../../../components/ScrollableContentWrapper",{default:function(e){F=e}},18),t.link("../../providers/ToolboxProvider",{useTabBarClose:function(e){j=e},useTabContext:function(e){H=e}},19),t.link("../../../../../app/threads/client/components/ThreadComponent",{default:function(e){W=e}},20),t.link("../../../../lib/renderMessageBody",{renderMessageBody:function(e){O=e}},21),t.link("./useThreadsList",{useThreadsList:function(e){V=e}},22),t.link("../../../../hooks/lists/useRecordList",{useRecordList:function(e){Q=e}},23);var J=a.memo(q(_(A))),K=a.memo(_(z)),X={tunread:1,tunreadUser:1,tunreadGroup:1},Y={t:1,name:1};function Z(e){return function(n){var t=n.rid,c=i(n,["rid"]),d=U(),f=j(),m=B(t,Y),p=L(t,X),h=E("thread-list-type","all"),k=r(h,2),g=k[0],x=k[1],v=s(""),C=r(v,2),T=C[0],y=C[1],w=b(T,400),I=l((function(){return{rid:t,text:w,type:g,tunread:null==p?void 0:p.tunread,uid:d}}),[t,w,g,p,d]),S=V(I,d),M=S.threadsList,R=S.initialItemCount,D=S.loadMoreItems,G=Q(M),_=G.phase,z=G.error,A=G.items,N=G.itemCount,F=u((function(e){y(e.currentTarget.value)}),[]);return a.createElement(e,o({},c,{unread:null==p?void 0:p.tunread,unreadUser:null==p?void 0:p.tunreadUser,unreadGroup:null==p?void 0:p.tunreadGroup,userId:d,error:z,threads:A,total:N,initial:R,loading:_===P.LOADING,loadMoreItems:D,room:m,text:T,setText:F,type:g,setType:x,onClose:f}))}}var $=function(e){e.preventDefault(),e.stopPropagation(),R([!0,"true"].includes(e.currentTarget.dataset.following)?"unfollowMessage":"followMessage",{mid:e.currentTarget.dataset.id})},ee=function(e){var n=o({},e);if(n.msg)return O(n).replace(/<br\s?\\?>/g," ");if(n.attachments){var t=n.attachments.find((function(e){return e.title||e.description}));if(t&&t.description)return N(t.description);if(t&&t.title)return N(t.title)}},ne=d(function(){function e(e){var n=e.data,t=e.index,r=e.style,i=e.showRealNames,u=e.unread,l=e.unreadUser,s=e.unreadGroup,c=e.userId,d=e.onClick,f=w(),m=G();if(!n[t])return a.createElement(K,{style:r});var p=n[t],h=ee(p),k=p.u.name,g=void 0===k?p.u.username:k;return a.createElement(J,o({},p,{name:i?g:p.u.username,username:p.u.username,style:r,unread:u.includes(p._id),mention:l.includes(p._id),all:s.includes(p._id),following:p.replies&&p.replies.includes(c),"data-id":p._id,msg:h,t:f,formatDate:m,handleFollowButton:$,onClick:d}))}return e}());function te(e){var n=e.total,t=void 0===n?10:n,o=e.initial,i=void 0===o?10:o,s=e.threads,d=void 0===s?[]:s,b=e.room,E=e.unread,R=void 0===E?[]:E,U=e.unreadUser,L=void 0===U?[]:U,B=e.unreadGroup,G=void 0===B?[]:B,_=e.type,z=e.setType,A=e.loadMoreItems,N=e.loading,P=e.onClose,j=e.error,O=e.userId,V=e.text,Q=e.setText,q=D("UI_Use_Real_Name"),J=c(),K=w(),X=S(),Y,Z=r(X,1)[0],$=I(Z),ee=T((function(e){var n=e.currentTarget.dataset.id;$.push({tab:"thread",context:n,rid:b._id,name:b.name})})),te=l((function(){return[["all",K("All")],["following",K("Following")],["unread",K("Unread")]]}),[K]);J.current=d;var re=u((function(e){var n=e.data,t=e.index,r=e.style;return(a.createElement(ne,{data:n,index:t,style:r,showRealNames:q,unread:R,unreadUser:L,unreadGroup:G,userId:O,onClick:ee}))}),[q,R,L,G,O,ee]),oe=T((function(e){return e<J.current.length})),ie=C({debounceDelay:200}),ae=ie.ref,ue=ie.contentBoxSize,le=(ue=void 0===ue?{}:ue).inlineSize,se=void 0===le?378:le,ce=ue.blockSize,de=void 0===ce?1:ce,fe=H(),me=M("jump");return a.createElement(a.Fragment,null,a.createElement(y.Header,null,a.createElement(y.Icon,{name:"thread"}),a.createElement(y.Text,null,K("Threads")),a.createElement(y.Close,{onClick:P})),a.createElement(y.Content,{paddingInline:0},a.createElement(f,{display:"flex",flexDirection:"row",p:"x24",borderBlockEndWidth:"x2",borderBlockEndStyle:"solid",borderBlockEndColor:"neutral-200",flexShrink:0},a.createElement(f,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},a.createElement(k,{inline:"x4"},a.createElement(p,{placeholder:K("Search_Messages"),value:V,onChange:Q,addon:a.createElement(m,{name:"magnifier",size:"x20"})}),a.createElement(h,{flexGrow:0,width:"110px",onChange:z,value:_,options:te})))),a.createElement(f,{flexGrow:1,flexShrink:1,ref:ae,overflow:"hidden",display:"flex"},j&&a.createElement(g,{mi:"x24",type:"danger"},j.toString()),0===t&&a.createElement(f,{p:"x24"},K("No_Threads")),!j&&t>0&&a.createElement(v,{isItemLoaded:oe,itemCount:t,loadMoreItems:N?function(){}:A},(function(e){var n=e.onItemsRendered,r=e.ref;return(a.createElement(x,{outerElementType:F,height:de,width:se,itemCount:t,itemData:d,itemSize:124,ref:r,minimumBatchSize:i,onItemsRendered:n},re))})))),fe&&a.createElement(y.InnerContent,null,a.createElement(W,{mid:fe,jump:me,room:b})))}t.exportDefault(Z(te))}

