function module(e,t,a){let n,o,r,l,i,s,d,u,m,c,p,v,h,g,k,f,S,I,y,T,b,M,w,x,E,A,_,R;a.export({itemSizeMap:()=>z,createItemData:()=>V,Row:()=>C,normalizeSidebarMessage:()=>D,SideBarItemTemplateWithData:()=>P}),a.link("@rocket.chat/fuselage",{Sidebar(e){n=e},Box(e){o=e},Badge(e){r=e}},0),a.link("@rocket.chat/fuselage-hooks",{useResizeObserver(e){l=e}},1),a.link("react",{default(e){i=e},useRef(e){s=e},useEffect(e){d=e}},2),a.link("react-window",{VariableSizeList(e){u=e},areEqual(e){m=e}},3),a.link("memoize-one",{default(e){c=e}},4),a.link("./hooks/usePreventDefault",{usePreventDefault(e){p=e}},5),a.link("../../app/markdown/lib/markdown",{filterMarkdown(e){v=e}},6),a.link("../components/UserStatus",{ReactiveUserStatus(e){h=e},colors(e){g=e}},7),a.link("../contexts/TranslationContext",{useTranslation(e){k=e}},8),a.link("../../app/utils",{roomTypes(e){f=e}},9),a.link("../contexts/UserContext",{useUserPreference(e){S=e},useUserId(e){I=e}},10),a.link("./RoomMenu",{default(e){y=e}},11),a.link("../contexts/SessionContext",{useSession(e){T=e}},12),a.link("./sections/Omnichannel",{default(e){b=e}},13),a.link("./hooks/useTemplateByViewMode",{useTemplateByViewMode(e){M=e}},14),a.link("./hooks/useShortcutOpenMenu",{useShortcutOpenMenu(e){w=e}},15),a.link("./hooks/useAvatarTemplate",{useAvatarTemplate(e){x=e}},16),a.link("./hooks/useRoomList",{useRoomList(e){E=e}},17),a.link("./hooks/useSidebarPaletteColor",{useSidebarPaletteColor(e){A=e}},18),a.link("../../lib/escapeHTML",{escapeHTML(e){_=e}},19),a.link("../components/ScrollableContentWrapper",{default(e){R=e}},20);const B={Omnichannel:b},O={overflowY:"scroll"},z=e=>{switch(e){case"extended":return 44;case"medium":return 36;case"condensed":default:return 28}},U=e=>{let{room:t,small:a}=e;switch(t.t){case"p":case"c":return i.createElement(n.Item.Icon,{"aria-hidden":"true",name:f.getIcon(t)});case"l":return i.createElement(n.Item.Icon,{"aria-hidden":"true",name:"headset",color:g[t.v.status]});case"d":return t.uids&&t.uids.length>2?i.createElement(n.Item.Icon,{"aria-hidden":"true",name:"team"}):t.uids&&t.uids.length>0?t.uids&&t.uids.length&&i.createElement(n.Item.Icon,null,i.createElement(h,{small:a&&"small",uid:t.uids.filter(e=>e!==t.u._id)[0]||t.u._id})):i.createElement(n.Item.Icon,{"aria-hidden":"true",name:f.getIcon(t)});default:return null}},V=c((e,t,a,n,o,r,l,i)=>({items:e,extended:t,t:a,SideBarItemTemplate:n,AvatarTemplate:o,openedRoom:r,sidebarViewMode:l,isAnonymous:i})),C=i.memo(e=>{let{data:t,index:a,style:o}=e;const{extended:r,items:l,t:s,SideBarItemTemplate:d,AvatarTemplate:u,openedRoom:m,sidebarViewMode:c}=t,p=l[a];if("string"==typeof p){const e=B[p];return e?i.createElement(e,{"aria-level":"1",style:o}):i.createElement(n.Section.Title,{"aria-level":"1",style:o},s(p))}return(i.createElement(P,{sidebarViewMode:c,style:o,selected:p.rid===m,t:s,room:p,extended:r,SideBarItemTemplate:d,AvatarTemplate:u}))},m),D=(e,t)=>{if(e.msg)return _(v(e.msg));if(e.attachments){const a=e.attachments.find(e=>e.title||e.description);return a&&a.description?_(a.description):a&&a.title?_(a.title):t("Sent_an_attachment")}};a.exportDefault(()=>{A();const e=s(),{ref:t,contentBoxSize:{blockSize:a=750}={}}=l({debounceDelay:100}),n=T("openedRoom"),r=S("sidebarViewMode"),m=M(),c=x(),v="extended"===r,h=!I(),g=k(),f=z(r),y=E(),b=V(y,v,g,m,c,n,r,h);return p(t),w(t),d(()=>{var t;null===(t=e.current)||void 0===t||t.resetAfterIndex(0)},[r]),i.createElement(o,{h:"full",w:"full",ref:t},i.createElement(u,{outerElementType:R,height:a,itemCount:y.length,itemSize:e=>"string"==typeof y[e]?B[y[e]]&&B[y[e]].size||40:f,itemData:b,overscanCount:10,width:"100%",ref:e,style:O},C))});const L=(e,t,a)=>{var n,o;return t?t.u?(null===(n=t.u)||void 0===n?void 0:n.username)===(null===(o=e.u)||void 0===o?void 0:o.username)?"".concat(a("You"),": ").concat(D(t,a)):"d"===e.t&&e.uids&&e.uids.length<=2?D(t,a):"".concat(t.u.name||t.u.username,": ").concat(D(t,a)):D(t,a):a("No_messages_yet")},P=i.memo((function e(t){let{room:a,id:n,extended:o,selected:l,SideBarItemTemplate:s,AvatarTemplate:d,t:u,style:m,sidebarViewMode:c,isAnonymous:p}=t;const v=f.getRoomName(a.t,a),h=i.createElement(U,{room:a,small:"medium"!==c}),g=f.getRouteLink(a.t,a),{lastMessage:k,hideUnreadStatus:S,unread:I=0,alert:T,userMentions:b,groupMentions:M,tunread:w=[],tunreadUser:x=[],rid:E,t:A,cl:_}=a,R="queued"===a.status,B=w.length>0,O=o&&L(a,k,u),z=O?i.createElement("span",{className:"message-body--unstyled",dangerouslySetInnerHTML:{__html:O}}):null,V=(b||x.length?"danger":B&&"primary")||M&&"warning"||"ghost",C=I>0||B?i.createElement(r,{style:{flexShrink:0},variant:V},I+(null==w?void 0:w.length)):null;return i.createElement(s,{is:"a",id:n,"data-qa":"sidebar-item","aria-level":"2",unread:!S&&(T||I),threadUnread:B,selected:l,href:g,"aria-label":v,title:v,time:null==k?void 0:k.ts,subtitle:z,icon:h,style:m,badges:C,avatar:d&&i.createElement(d,a),menu:!p&&!R&&(()=>i.createElement(y,{alert:T,threadUnread:B,rid:E,unread:!!I,roomOpen:!1,type:A,cl:_,name:v,status:a.status}))})}),(e,t)=>{var a,n,o,r,l,i,s,d;return!["id","style","extended","selected","SideBarItemTemplate","AvatarTemplate","t","sidebarViewMode"].some(a=>e[a]!==t[a])&&(e.room===t.room||e.room._id===t.room._id&&((null===(a=e.room._updatedAt)||void 0===a?void 0:a.toISOString())===(null===(n=t.room._updatedAt)||void 0===n?void 0:n.toISOString())&&((null===(o=e.room.lastMessage)||void 0===o?void 0:null===(r=o._updatedAt)||void 0===r?void 0:r.toISOString())===(null===(l=t.room.lastMessage)||void 0===l?void 0:null===(i=l._updatedAt)||void 0===i?void 0:i.toISOString())&&(e.room.alert===t.room.alert&&(null===(s=e.room.v)||void 0===s?void 0:s.status)===(null===(d=t.room.v)||void 0===d?void 0:d.status)))))})}

