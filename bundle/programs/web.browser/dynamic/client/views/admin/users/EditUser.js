function module(e,t,a){let s,n,r,l,o,i,u,d,c,m,p,v,k,f,E,h,_,x,b,A,U;function g(e){let{uid:t}=e,a=n(e,["uid"]);const o=v(),{value:i,phase:u,error:d}=A("roles.list",""),{value:c,phase:m,error:k}=A("users.info",l(()=>({userId:t}),[t]));return[m,u].includes(U.LOADING)?r.createElement(b,null):k||d?r.createElement(p,{m:"x16",type:"danger"},o("User_not_found")):r.createElement(y,s({data:c.user,roles:i.roles},a))}a.link("@babel/runtime/helpers/extends",{default(e){s=e}},0),a.link("@babel/runtime/helpers/objectWithoutProperties",{default(e){n=e}},1),a.export({EditUserWithData:()=>g,EditUser:()=>y}),a.link("react",{default(e){r=e},useMemo(e){l=e},useState(e){o=e},useCallback(e){i=e}},0),a.link("@rocket.chat/fuselage",{Box(e){u=e},Field(e){d=e},Margins(e){c=e},Button(e){m=e},Callout(e){p=e}},1),a.link("../../../contexts/TranslationContext",{useTranslation(e){v=e}},2),a.link("../../../hooks/useEndpointAction",{useEndpointAction(e){k=e}},3),a.link("../../../hooks/useEndpointUpload",{useEndpointUpload(e){f=e}},4),a.link("../../../contexts/RouterContext",{useRoute(e){E=e}},5),a.link("../../../components/avatar/UserAvatarEditor",{default(e){h=e}},6),a.link("../../../hooks/useForm",{useForm(e){_=e}},7),a.link("./UserForm",{default(e){x=e}},8),a.link("../../../components/Skeleton",{FormSkeleton(e){b=e}},9),a.link("../../../hooks/useEndpointData",{useEndpointData(e){A=e}},10),a.link("../../../hooks/useAsyncState",{AsyncStatePhase(e){U=e}},11);const w=e=>{var t,a,s,n,r;return{roles:e.roles,name:null!==(t=e.name)&&void 0!==t?t:"",password:"",username:e.username,status:e.status,bio:null!==(a=e.bio)&&void 0!==a?a:"",nickname:null!==(s=e.nickname)&&void 0!==s?s:"",email:e.emails&&e.emails[0].address||"",verified:e.emails&&e.emails[0].verified||!1,setRandomPassword:!1,requirePasswordChange:e.setRandomPassword||!1,customFields:null!==(n=e.customFields)&&void 0!==n?n:{},statusText:null!==(r=e.statusText)&&void 0!==r?r:""}};function y(e){let{data:t,roles:a}=e,p=n(e,["data","roles"]);const b=v(),[A,U]=o(),{values:g,handlers:y,reset:C,hasUnsavedChanges:S}=_(w(t)),T=E("admin-users"),P=i(e=>T.push({context:"info",id:e}),[T]),F=l(()=>({userId:t._id,data:g}),[t._id,g]),R=l(()=>({userId:t._id,avatarUrl:A&&A.avatarUrl}),[t._id,A]),I=l(()=>({userId:t._id}),[t._id]),D=k("POST","users.update",F,b("User_updated_successfully")),O=f("users.setAvatar",R,b("Avatar_changed_successfully")),j=k("POST","users.setAvatar",R,b("Avatar_changed_successfully")),G=k("POST","users.resetAvatar",I,b("Avatar_changed_successfully")),B=i(async()=>"reset"===A?G():A.avatarUrl?j():(A.set("userId",t._id),O(A)),[A,G,O,j,t._id]),M=i(async()=>{const e=await D();e.success&&(A&&await B(),P(t._id))},[A,t._id,P,D,B]),W=a.map(e=>{let{_id:t,description:a}=e;return[t,a||t]}),q=S||A,H=l(()=>r.createElement(h,{currentUsername:t.username,username:g.username,etag:t.avatarETag,setAvatarObj:U}),[t.username,t.avatarETag,g.username]),L=l(()=>r.createElement(d,null,r.createElement(d.Row,null,r.createElement(u,{display:"flex",flexDirection:"row",justifyContent:"space-between",w:"full"},r.createElement(c,{inlineEnd:"x4"},r.createElement(m,{flexGrow:1,type:"reset",disabled:!q,onClick:C},b("Reset")),r.createElement(m,{mie:"none",flexGrow:1,disabled:!q||0===g.email.length,onClick:M},b("Save")))))),[M,q,C,b,g]);return r.createElement(x,s({formValues:g,formHandlers:y,availableRoles:W,prepend:H,append:L},p))}}

