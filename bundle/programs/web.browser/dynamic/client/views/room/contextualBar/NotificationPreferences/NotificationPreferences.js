function module(e,t,n){let o,i,l,a,s,r,u,c,d,m,p,f,h,k,C;n.export({NotificationPreferences:()=>E}),n.link("react",{default(e){o=e}},0),n.link("@rocket.chat/fuselage",{Button(e){i=e},ButtonGroup(e){l=e},FieldGroup(e){a=e},Icon(e){s=e}},1),n.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){r=e}},2),n.link("../../../../hooks/useForm",{useForm(e){u=e}},3),n.link("../../../../contexts/UserContext",{useUserSubscription(e){c=e}},4),n.link("../../../../contexts/TranslationContext",{useTranslation(e){d=e}},5),n.link("../../../../contexts/CustomSoundContext",{useCustomSound(e){m=e}},6),n.link("../../../../hooks/useEndpointAction",{useEndpointActionExperimental(e){p=e}},7),n.link("../../../../components/VerticalBar",{default(e){f=e}},8),n.link("./components/Preferences",{Preferences(e){h=e}},9),n.link("./components/NotificationByDevice",{NotificationByDevice(e){k=e}},10),n.link("./components/NotificationToogle",{NotificationToogle(e){C=e}},11);const E=e=>{let{handleClose:t,formValues:n,formHandlers:r,formHasUnsavedChanges:u,handlePlaySound:c,handleOptions:m,handleSaveButton:p,handleCancelButton:E}=e;const b=d();return(o.createElement(o.Fragment,null,o.createElement(f.Header,null,o.createElement(f.Icon,{name:"bell"}),o.createElement(f.Text,null,b("Notifications_Preferences")),t&&o.createElement(f.Close,{onClick:t})),o.createElement(f.ScrollableContent,null,o.createElement(C,{label:b("Turn_ON"),description:b("Receive_alerts"),onChange:r.handleTurnOn,defaultChecked:n.turnOn}),o.createElement(C,{label:b("Mute_Group_Mentions"),onChange:r.handleMuteGroupMentions,defaultChecked:n.muteGroupMentions}),o.createElement(C,{label:b("Show_counter"),description:b("Display_unread_counter"),onChange:r.handleShowCounter,defaultChecked:n.showCounter}),o.createElement(a,null,o.createElement(k,{device:b("Desktop"),icon:"computer"},o.createElement(h,{id:"DesktopAlert",onChange:r.handleDesktopAlert,name:b("Alerts"),options:m.alerts,optionDefault:n.desktopAlert}),o.createElement(h,{id:"DesktopAudio",onChange:r.handleDesktopAudio,name:b("Audio"),options:m.audio,optionDefault:n.desktopAudio}),o.createElement(h,{id:"DesktopSound",onChange:r.handleDesktopSound,name:b("Sound"),options:m.sound,optionDefault:n.desktopSound},o.createElement(i,{mis:"x4",square:!0,ghost:!0,onClick:c},o.createElement(s,{name:"play",size:"x18"})))),o.createElement(k,{device:b("Mobile"),icon:"mobile"},o.createElement(h,{id:"MobileAlert",onChange:r.handleMobileAlert,name:b("Alerts"),options:m.alerts,optionDefault:n.mobileAlert})),o.createElement(k,{device:b("Email"),icon:"mail"},o.createElement(h,{id:"EmailAlert",onChange:r.handleEmailAlert,name:b("Alerts"),options:m.alerts,optionDefault:n.emailAlert})))),o.createElement(f.Footer,null,o.createElement(l,{stretch:!0},o.createElement(i,{onClick:E},b("Cancel")),o.createElement(i,{primary:!0,disabled:!u,onClick:p},b("Save"))))))};n.exportDefault(o.memo(e=>{let{tabBar:t,rid:n}=e;const i=d(),l=c(n),a=m(),s=r(()=>t&&t.close()),f=p("POST","rooms.saveNotification",i("Room_updated_successfully")),{values:h,handlers:k,hasUnsavedChanges:C,commit:b,reset:A}=u({turnOn:!l.disableNotifications,muteGroupMentions:l.muteGroupMentions,showCounter:!l.hideUnreadStatus,desktopAlert:"subscription"===l.desktopPrefOrigin&&l.desktopNotifications||"default",desktopAudio:"subscription"===l.audioPrefOrigin&&l.audioNotifications||"default",desktopSound:l.audioNotificationValue||"default",mobileAlert:"subscription"===l.mobilePrefOrigin&&l.mobilePushNotifications||"default",emailAlert:"subscription"===l.emailPrefOrigin&&l.emailNotifications||"default"}),g=[["default",i("Default")],["all",i("All_messages")],["mentions",i("Mentions")],["nothing",i("Nothing")]],N=Object.entries(a.list.get()).map(e=>[e[0],e[1].name]),S={alerts:g,audio:g,sound:[["none None",i("None")],["default",i("Default")],...N]},D=()=>a.play(h.desktopSound),v=r(()=>{const e={};e.disableNotifications=h.turnOn?"0":"1",e.muteGroupMentions=h.muteGroupMentions?"1":"0",e.hideUnreadStatus=h.showCounter?"0":"1",e.desktopNotifications=h.desktopAlert,e.audioNotifications=h.desktopAudio,e.audioNotificationValue=h.desktopSound,e.mobilePushNotifications=h.mobileAlert,e.emailNotifications=h.emailAlert,f({roomId:n,notifications:e}),b()});return o.createElement(E,{handleClose:s,formValues:h,formHandlers:k,formHasUnsavedChanges:C,handlePlaySound:D,handleOptions:S,handleSaveButton:v,handleCancelButton:A})}))}

