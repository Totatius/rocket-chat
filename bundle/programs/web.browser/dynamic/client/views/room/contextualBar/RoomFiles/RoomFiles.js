function module(e,t,l){let n,o,a,i,s,r,c,d,u,m,p,f,x,k,y,C,h,g,D,I,E,S,w,T,b,A,M,v,F,z,L,G,N,O;l.link("@babel/runtime/helpers/objectSpread2",{default(e){n=e}},0),l.export({createItemData:()=>U,RoomFiles:()=>_}),l.link("react",{default(e){o=e},useState(e){a=e},useCallback(e){i=e},useMemo(e){s=e}},0),l.link("@rocket.chat/fuselage-hooks",{useMutableCallback(e){r=e},useLocalStorage(e){c=e},useDebouncedState(e){d=e},useUniqueId(e){u=e},useResizeObserver(e){m=e}},1),l.link("@rocket.chat/fuselage",{Box(e){p=e},Icon(e){f=e},TextInput(e){x=e},Select(e){k=e},Throbber(e){y=e},Margins(e){C=e}},2),l.link("react-window",{FixedSizeList(e){h=e}},3),l.link("react-window-infinite-loader",{default(e){g=e}},4),l.link("memoize-one",{default(e){D=e}},5),l.link("../../../../contexts/UserContext",{useUserId(e){I=e},useUserRoom(e){E=e}},6),l.link("../../../../components/DeleteFileWarning",{default(e){S=e}},7),l.link("../../../../contexts/ToastMessagesContext",{useToastMessageDispatch(e){w=e}},8),l.link("../../../../contexts/ModalContext",{useSetModal(e){T=e}},9),l.link("../../../../contexts/ServerContext",{useMethod(e){b=e}},10),l.link("../../../../hooks/useAsyncState",{AsyncStatePhase(e){A=e}},11),l.link("../../../../contexts/TranslationContext",{useTranslation(e){M=e}},12),l.link("../../../../components/VerticalBar",{default(e){v=e}},13),l.link("./components/FileItem",{default(e){F=e}},14),l.link("../../../../components/ScrollableContentWrapper",{default(e){z=e}},15),l.link("./hooks/useFileList",{useFileList(e){L=e}},16),l.link("../../../../hooks/useComponentDidUpdate",{useComponentDidUpdate(e){G=e}},17),l.link("./hooks/useMessageDeletionIsAllowed",{useMessageDeletionIsAllowed(e){N=e}},18),l.link("../../providers/ToolboxProvider",{useTabBarClose(e){O=e}},19);const R=o.memo(e=>{let{data:t,index:l,style:n}=e;const{items:a,userId:i,onClickDelete:s,isDeletionAllowed:r}=t,c=a[l]||null;return c&&o.createElement(_.Item,{index:l,style:n,_id:c._id,name:c.name,url:c.url,uploadedAt:c.uploadedAt,user:c.user,ts:c.ts,type:c.type,typeGroup:c.typeGroup,fileData:t[l],userId:i,onClickDelete:s,isDeletionAllowed:r})}),U=D((e,t,l)=>({items:e,onClickDelete:t,isDeletionAllowed:l})),_=function e(t){let{loading:l,filesItems:n=[],text:a,type:i,setText:r,setType:c,onClickClose:d,onClickDelete:D,total:I,loadMoreItems:E,isDeletionAllowed:S}=t;const w=M(),T=e=>!!n[e],b=s(()=>[["all",w("All")],["image",w("Images")],["video",w("Videos")],["audio",w("Audios")],["text",w("Texts")],["application",w("Files")]],[w]),{ref:A,contentBoxSize:{blockSize:F=780}={}}=m({debounceDelay:100}),L=u(),G=U(n,D,S);return o.createElement(o.Fragment,null,o.createElement(v.Header,null,o.createElement(v.Icon,{name:"attachment"}),o.createElement(v.Text,null,w("Files")),d&&o.createElement(v.Close,{onClick:d})),o.createElement(v.Content,{p:"x12"},o.createElement(p,{display:"flex",flexDirection:"row",p:"x12",flexShrink:0},o.createElement(p,{display:"flex",flexDirection:"row",flexGrow:1,mi:"neg-x4"},o.createElement(C,{inline:"x4"},o.createElement(x,{"data-qa-files-search":!0,id:L,placeholder:w("Search_Files"),value:a,onChange:r,addon:o.createElement(f,{name:"magnifier",size:"x20"})}),o.createElement(k,{flexGrow:0,width:"110px",onChange:c,value:i,options:b})))),l&&o.createElement(p,{p:"x12"},o.createElement(y,{size:"x12"})),!l&&n.length<=0&&o.createElement(p,{p:"x12"},w("No_results_found")),o.createElement(p,{w:"full",h:"full",ref:A,flexShrink:1,overflow:"hidden"},o.createElement(g,{isItemLoaded:T,itemCount:I,loadMoreItems:E},e=>{let{onItemsRendered:t,ref:l}=e;return(o.createElement(h,{outerElementType:z,className:"List",height:F,itemCount:I,itemSize:74,itemData:G,onItemsRendered:t,ref:l},R))}))))};_.Item=F,l.exportDefault(e=>{let{rid:t}=e;const l=I(),s=O(),u=E(t);u.type=u.t,u.rid=t;const m=T(),p=r(()=>m()),f=w(),x=b("deleteFileMessage"),[k,y]=c("file-list-type","all"),[C,h]=a(""),[g,D]=d({roomId:t,sort:JSON.stringify({uploadedAt:-1}),count:50,query:JSON.stringify(n({},"all"!==k&&{typeGroup:k}))},500),M=i(e=>{h(e.currentTarget.value)},[]);G(()=>D(e=>n({},e,{roomId:t,query:JSON.stringify(n({name:{$regex:C||"",$options:"i"}},"all"!==k&&{typeGroup:k}))})),[t,C,k,D]);const{value:v,phase:F,reload:z,more:R}=L(u.type,g),U=r(e=>{const t=async()=>{try{await x(e)}catch(t){f({type:"error",message:t})}p(),z()};m(o.createElement(S,{onConfirm:t,onCancel:p}))},[]),q=i((e,t)=>R(l=>n({},l,{offset:e,count:t-e}),(e,t)=>({total:t.total,files:[...e.files,...t.files]})),[R]),B=N(t,l);return o.createElement(_,{rid:t,loading:F===A.LOADING&&!0,type:k,text:C,loadMoreItems:q,setType:y,setText:M,filesItems:F===A.RESOLVED&&(null==v?void 0:v.files),total:null==v?void 0:v.total,onClickClose:s,onClickDelete:U,isDeletionAllowed:B})})}

