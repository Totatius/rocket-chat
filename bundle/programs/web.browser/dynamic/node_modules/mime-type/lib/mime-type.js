function module(t,e,i){(function(){var e,s,n,r,o,p,u,a,h,c=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};u=t("minimatch"),r=t("util-ex/lib/is/type/array"),p=t("util-ex/lib/is/type/string"),o=t("util-ex/lib/is/type/function"),s=t("util-ex/lib/defineProperty"),a=t("path.js"),n=/^\s*([^;\s]*)(?:;|\s|$)/,h=/^text\//i,i.exports=e=function(){"use strict";var t;function e(t,i){if(!(this instanceof e))return new e(t,i);s(this,"types",{}),s(this,"dup",this.dupDefault),s(this,"extensions",void 0,{get:function(){var t,e,i,s,n,r;for(r={},t=0,i=(n=Object.keys(this)).length;t<i;t++)s=this[e=n[t]],r[e]=s.extensions;return r}}),i&&c.call([0,1,2,3],i)>=0&&(this.dup=i),t&&this.load(t)}return e.prototype.dupDefault=0,e.prototype.dupSkip=1,e.prototype.dupOverwrite=2,e.prototype.dupAppend=3,e.prototype.charset=function(t){var e,i,s;return t&&p(t)&&((i=(e=n.exec(t))&&this[e[1].toLowerCase()])&&(s=i.charset),!s&&h.test(e[1])&&(s="utf-8")),s},e.prototype.contentType=function(t){var e,e,i;return t&&p(t)&&(i=-1===t.indexOf("/")?this.lookup(t):t)&&-1===i.indexOf("charset")&&(e=this.charset(i))&&(i+="; charset="+e.toLowerCase()),i},e.prototype.extension=function(t){var e;return t&&p(t)&&(e=(e=n.exec(t))&&this[e[1].toLowerCase()])&&(e=e.defaultExtension||e.extensions[0]),e},e.prototype.lookup=function(t){var e,i,s;return t&&p(t)&&(e=a.extname("x."+t).toLowerCase().substr(1))&&(i=/[*?!+|{]/.test(e)?(i=Object.keys(this.types).filter((function(t){return u(t,e)}))).length?i.map((s=this,function(t){return s.types[t]})):void 0:this.types[e]),i},e.prototype.glob=function(t){var e;return"*/*"===t?["application/octet-stream"]:e=Object.keys(this).filter((function(e){return u(e,t)}))},e.prototype.exist=Object.prototype.hasOwnProperty,t=["nginx","apache",void 0,"iana"],e.prototype.define=function(e,i,s){var n,o,u,a,h,f,l,d;if(e&&i&&i.extensions&&!this.hasOwnProperty(e)){for(null==s&&(s=this.dup),o=i.extensions,r(o)||(i.extensions=[o]),o=[],i.charset&&(i.charset=i.charset.toLowerCase()),a=0,h=(f=i.extensions).length;a<h;a++){if(n=f[a],l=this.types[n])switch(s){case this.dupSkip:continue;case this.dupAppend:p(l)&&(l=[l]),c.call(l,e)<0&&l.push(e);break;case this.dupOverwrite:l=e;break;case this.dupDefault:if(r(l)&&(l=l[0]),u=t.indexOf(this[l].source),d=t.indexOf(i.source),"application/octet-stream"!==l&&u>d||u===d&&"application/"===l.substr(0,12)){process.env.DEBUG_MIME&&console.warn("defineMime("+e+"): the "+n+" extension is exists on\n"+l+" skipped it.");continue}l=e}else l=e;this.types[n]=l,o.push(n)}return o.length&&(i.extensions=o,this[e]=i),o}},e.prototype.load=function(t,e){var i,s;return i=0,Object.keys(t).forEach((s=this,function(n){var r;if((r=s.define(n,t[n],e))&&r.length)return i++})),i},e.prototype.delete=function(t){var e,i,s,n,o;if(n=this.exist(t)){for(i in s=this.types)o=s[i],r(o)?-1!==(e=o.indexOf(t))&&(o.splice(e,1),1===o.length&&(this.types[i]=o[0])):t===o&&delete this.types[i];delete this[t]}return n},e.prototype.clear=function(t){var e,i,s,n;for(e in s=0,i=this)n=i[e],this.hasOwnProperty(e)&&(o(t)?t(e,n)&&(this.delete(e),s++):p(t)?u(e,t)&&(this.delete(e),s++):(this.delete(e),s++));return s},e}(),s(i.exports,"default",e)}).call(this)}

